# 什么是单元测试

**单元测试用于测试一个独立的工作单元的执行结果是否符合预期。**

一个*工作单元*就是一项任务，不直接依赖于其他任何任务的完成。在面向对象的编程语言例如Java中，一个*工作单元*通常是（但不总是）一个类中的一个非private的方法。因此，单元测试是最细粒度的测试。相比之下，*集成测试*和*验收测试*检查的是各个组件如何交互，是更粗粒度的测试。

单元测试通常关注的是一个方法是否遵循了它的API契约中的条款。通常而言，在单元测试中，我们会依照下面的步骤进行测试：

1. 创建被测对象
2. 将测对象的设置到一个初始状态，包括注入被测对象的所依赖的协作对象的实例
3. 使用指定的参数集调用被测对象的方法，执行测试
4. 断言方法执行的结果符合预期。

执行结果通常有以下三种形式：

* 对于有返回值的方法，断言方法的返回值符合预期
* 对于没有返回值的方法，断言它产生的副作用（例如：修改了对象的内部状态，调用了协作对象）符合预期。
* 抛出了我们预期的异常。例如对于ATM机应用，当测试中的取款金额超出了账户的可用余额时，断言取款方法调用会抛出BalanceInsufficientException异常。或者当账户被冻结时，断言调用取款方法会抛出AccountLockedException异常。

单元测试就是用于测试被测类中的一个工作单元（通常是一个非private的方法）在各种正常和异常条件下被调用时的响应（返回值、副作用、抛出异常）都符合设计者的预期。

